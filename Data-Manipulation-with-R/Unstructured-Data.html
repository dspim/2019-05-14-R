<!DOCTYPE html>
<html>
<head>
  <title>非結構化的資料處理</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: '非結構化的資料處理',
                        useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
                      },

      // Author information
      presenters: [
            {
        name:  'Wush Wu' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <link href="Unstructured-Data_files/ioslides-13.5.1/fonts/fonts.css" rel="stylesheet" />
  <link href="Unstructured-Data_files/ioslides-13.5.1/theme/css/default.css" rel="stylesheet" />
  <link href="Unstructured-Data_files/ioslides-13.5.1/theme/css/phone.css" rel="stylesheet" />
  <script src="Unstructured-Data_files/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
  <script src="Unstructured-Data_files/ioslides-13.5.1/js/prettify/prettify.js"></script>
  <script src="Unstructured-Data_files/ioslides-13.5.1/js/prettify/lang-r.js"></script>
  <script src="Unstructured-Data_files/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
  <script src="Unstructured-Data_files/ioslides-13.5.1/js/hammer.js"></script>
  <script src="Unstructured-Data_files/ioslides-13.5.1/js/slide-controller.js"></script>
  <script src="Unstructured-Data_files/ioslides-13.5.1/js/slide-deck.js"></script>
  <script src="Unstructured-Data_files/htmlwidgets-1.3/htmlwidgets.js"></script>
  <script src="Unstructured-Data_files/jquery-1.12.4/jquery.min.js"></script>
  <link href="Unstructured-Data_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
  <script src="Unstructured-Data_files/datatables-binding-0.5/datatables.js"></script>
  <link href="Unstructured-Data_files/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
  <link href="Unstructured-Data_files/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
  <script src="Unstructured-Data_files/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
  <link href="Unstructured-Data_files/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
  <script src="Unstructured-Data_files/nouislider-7.0.10/jquery.nouislider.min.js"></script>
  <link href="Unstructured-Data_files/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
  <script src="Unstructured-Data_files/selectize-0.12.0/selectize.min.js"></script>
  <link href="Unstructured-Data_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
  <script src="Unstructured-Data_files/crosstalk-1.0.0/js/crosstalk.min.js"></script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    summary {
      display: list-item;
    }

    slides > slide {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      -o-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.4s;
      -moz-transition: opacity 0.6s ease-in 0.4s;
      -o-transition: opacity 0.6s ease-in 0.4s;
      transition: opacity 0.6s ease-in 0.4s;
      opacity: 0;
    }
/* https://github.com/ropensci/plotly/pull/524#issuecomment-468142578 */
slide:not(.current) .plotly.html-widget{
  display: block;
}

  </style>

  <link rel="stylesheet" href="unstructured-data.css" type="text/css" />
  <link rel="stylesheet" href="../css/dsp.css" type="text/css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" />
  <link rel="stylesheet" href="../css/wush-custom.css" type="text/css" />

</head>

<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
            <p style="margin-top: 6px; margin-left: -2px;">2019/5/8</p>
          </hgroup>
  </slide>

<slide class=""><hgroup><h2>課程大綱</h2></hgroup><article  id="section">

<ul>
<li>純文字的資料處理

<ul>
<li>分割與擷取</li>
<li>搜尋與取代</li>
<li>正則表示式</li>
</ul></li>
<li>中文資料的編碼</li>
<li>練習</li>
</ul>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>純文字的資料處理</h2></hgroup><article  id="section-1">

</article></slide><slide class=""><hgroup><h2><code>strsplit</code></h2></hgroup><article  id="strsplit">

<pre class = 'prettyprint lang-r'>args(strsplit)</pre>

<pre >## function (x, split, fixed = FALSE, perl = FALSE, useBytes = FALSE) 
## NULL</pre>

<pre class = 'prettyprint lang-r'>strsplit(&quot;abc&quot;, &quot;a&quot;)</pre>

<pre >## [[1]]
## [1] &quot;&quot;   &quot;bc&quot;</pre>

<pre class = 'prettyprint lang-r'>strsplit(c(&quot;abc&quot;, &quot;baca&quot;), &quot;a&quot;)</pre>

<pre >## [[1]]
## [1] &quot;&quot;   &quot;bc&quot;
## 
## [[2]]
## [1] &quot;b&quot; &quot;c&quot;</pre>

</article></slide><slide class=""><hgroup><h2>利用<code>strsplit</code>搭配中括號抓取資料</h2></hgroup><article  id="strsplit-1">

<ul>
<li>能不能利用 <code>strsplit</code> 找出 <code>&lt;author&gt;...&lt;/author&gt;</code> 之間的文字？</li>
</ul>

<pre >&lt;fortune&gt;
  &lt;quote&gt;Okay, let&#39;s stand up and be counted: who has been writing diamond graph code? Mine&#39;s 60 lines.&lt;/quote&gt;
  &lt;author&gt;Barry Rowlingson&lt;/author&gt;
  &lt;context&gt;in a discussion about the patent for diamond graphs&lt;/context&gt;
  &lt;source&gt;R-help&lt;/source&gt;
  &lt;date&gt;August 2003&lt;/date&gt;
&lt;/fortune&gt;
&lt;fortune&gt;
  &lt;quote&gt;Bug, undocumented behaviour, feature? I don&#39;t know. It all seems to work in 1.6.0, so everyone should downgrade now... :)&lt;/quote&gt;
  &lt;author&gt;Barry Rowlingson&lt;/author&gt;
  &lt;context&gt;NA&lt;/context&gt;
  &lt;source&gt;R-help&lt;/source&gt;
  &lt;date&gt;July 2003&lt;/date&gt;
&lt;/fortune&gt;
&lt;fortune&gt;
  &lt;quote&gt;I&#39;m always thrilled when people discover what lexical scoping really means.&lt;/quote&gt;
  &lt;author&gt;Robert Gentleman&lt;/author&gt;
  &lt;context&gt;NA&lt;/context&gt;
  &lt;source&gt;Statistical Computing 2003, Reisensburg&lt;/source&gt;
  &lt;date&gt;June 2003&lt;/date&gt;
&lt;/fortune&gt;
&lt;fortune&gt;
  &lt;quote&gt;My institution has a particularly diabolical policy on intellectual property, especially on software.&lt;/quote&gt;
  &lt;author&gt;Ross Ihaka&lt;/author&gt;
  &lt;context&gt;NA&lt;/context&gt;
  &lt;source&gt;R-help&lt;/source&gt;
  &lt;date&gt;August 2003&lt;/date&gt;
&lt;/fortune&gt;
&lt;fortune&gt;
  &lt;quote&gt;If you imagine that this pen is Trellis, then Lattice is not this pen.&lt;/quote&gt;
  &lt;author&gt;Paul Murrell&lt;/author&gt;
  &lt;context&gt;on the difference of Lattice (which eventually was called grid) and Trellis&lt;/context&gt;
  &lt;source&gt;DSC 2001, Wien&lt;/source&gt;
  &lt;date&gt;March 2001&lt;/date&gt;
&lt;/fortune&gt;</pre>

</article></slide><slide class=""><hgroup><h2><code>strsplit</code></h2></hgroup><article  id="strsplit-2">

<pre class = 'prettyprint lang-r'>x &lt;- readLines(&quot;http://homepage.ntu.edu.tw/~wush978/rdataengineer/fortunes.xml&quot;)
. &lt;- strsplit(x, &quot;&lt;author&gt;&quot;)</pre>

<ul>
<li>在<code>.</code>中(<code>.</code>是<code>list</code>)

<ul>
<li>原文有<code>&lt;author&gt;</code>的字串，會被分割為長度是 2 的字串</li>
<li>原文沒有<code>&lt;author&gt;</code>的字串，長度是1</li>
</ul></li>
</ul>

<pre class = 'prettyprint lang-r'>length(.[[1]])</pre>

<pre >## [1] 1</pre>

<pre class = 'prettyprint lang-r'>length(.[[3]])</pre>

<pre >## [1] 2</pre>

</article></slide><slide class=""><hgroup><h2><code>strsplit</code></h2></hgroup><article  id="strsplit-3">

<ul>
<li>寫迴圈處理</li>
</ul>

<pre class = 'prettyprint lang-r'>.tokens &lt;- c()
for(.token in .) {
  if (length(.token) == 2) stop(&quot;&quot;)
}</pre>

<ul>
<li>與R互動，看看<code>.token</code></li>
</ul>

<pre class = 'prettyprint lang-r'>.tokens &lt;- c()
for(.token in .) {
  if (length(.token) == 2) .tokens &lt;- c(.tokens, .token[2])
}
.tokens</pre>

<pre >## [1] &quot;Barry Rowlingson&lt;/author&gt;&quot; &quot;Barry Rowlingson&lt;/author&gt;&quot;
## [3] &quot;Robert Gentleman&lt;/author&gt;&quot; &quot;Ross Ihaka&lt;/author&gt;&quot;      
## [5] &quot;Paul Murrell&lt;/author&gt;&quot;</pre>

</article></slide><slide class=""><hgroup><h2><code>strsplit</code></h2></hgroup><article  id="strsplit-4">

<ul>
<li>再用<code>&lt;/author&gt;</code>切一次</li>
</ul>

<pre class = 'prettyprint lang-r'>. &lt;- strsplit(.tokens, &quot;&lt;/author&gt;&quot;)
unlist(.)</pre>

<pre >## [1] &quot;Barry Rowlingson&quot; &quot;Barry Rowlingson&quot; &quot;Robert Gentleman&quot;
## [4] &quot;Ross Ihaka&quot;       &quot;Paul Murrell&quot;</pre>

</article></slide><slide class=""><hgroup><h2>小挑戰</h2></hgroup><article  id="section-2">

<ul>
<li>請用相同的作法，找出<code>x</code>中的<code>&lt;date&gt;</code>與<code>&lt;/date&gt;</code>之間的文字</li>
</ul>

<pre class = 'prettyprint lang-r'>download.file(
  &quot;http://homepage.ntu.edu.tw/~wush978/rdataengineer/fortunes250.xml.gz&quot;,
  destfile = .tmp.path &lt;- tempfile(fileext = &quot;.gz&quot;),
  mode = &quot;wb&quot;
  )
x250 &lt;- readLines(.tmp.path)</pre>

<ul>
<li>請用相同的作法，找出<code>x250</code>中的<code>&lt;date&gt;</code>與<code>&lt;/date&gt;</code>之間的文字</li>
</ul>

</article></slide><slide class=""><hgroup><h2><code>strsplit</code>的<code>fixed</code>參數</h2></hgroup><article  id="strsplitfixed">

<pre class = 'prettyprint lang-r'>strsplit(&quot;a.b.c&quot;, &quot;.&quot;)</pre>

<pre >## [[1]]
## [1] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</pre>

<pre class = 'prettyprint lang-r'>strsplit(&quot;a.b.c&quot;, &quot;.&quot;, fixed = TRUE)</pre>

<pre >## [[1]]
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</pre>

<ul>
<li><code>.</code> 是正則表示式的特殊字元，有特殊的含意

<ul>
<li><code>fixed = TRUE</code>之後，R會忽略正則表示式</li>
</ul></li>
</ul>

</article></slide><slide class=""><hgroup><h2>搜尋 <code>grep</code></h2></hgroup><article  id="grep">

<pre class = 'prettyprint lang-r'>grep(pattern = &quot;author&quot;, x)</pre>

<pre >## [1]  3 10 17 24 31</pre>

<pre class = 'prettyprint lang-r'>grep(pattern = &quot;author&quot;, x, value = TRUE)</pre>

<pre >## [1] &quot;  &lt;author&gt;Barry Rowlingson&lt;/author&gt;&quot;
## [2] &quot;  &lt;author&gt;Barry Rowlingson&lt;/author&gt;&quot;
## [3] &quot;  &lt;author&gt;Robert Gentleman&lt;/author&gt;&quot;
## [4] &quot;  &lt;author&gt;Ross Ihaka&lt;/author&gt;&quot;      
## [5] &quot;  &lt;author&gt;Paul Murrell&lt;/author&gt;&quot;</pre>

<pre class = 'prettyprint lang-r'>grepl(pattern = &quot;author&quot;, x)</pre>

<pre >##  [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
## [12] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [23] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
## [34] FALSE FALSE</pre>

</article></slide><slide class=""><hgroup><h2>取代 <code>gsub</code></h2></hgroup><article  id="gsub">

<pre class = 'prettyprint lang-r'>(. &lt;- grep(pattern = &quot;author&quot;, x[1:10], value = TRUE))</pre>

<pre >## [1] &quot;  &lt;author&gt;Barry Rowlingson&lt;/author&gt;&quot;
## [2] &quot;  &lt;author&gt;Barry Rowlingson&lt;/author&gt;&quot;</pre>

<pre class = 'prettyprint lang-r'>(. &lt;- gsub(pattern = &quot;  &lt;author&gt;&quot;, replacement = &quot;&quot;, ., fixed = TRUE))</pre>

<pre >## [1] &quot;Barry Rowlingson&lt;/author&gt;&quot; &quot;Barry Rowlingson&lt;/author&gt;&quot;</pre>

<pre class = 'prettyprint lang-r'>(. &lt;- gsub(pattern = &quot;&lt;/author&gt;&quot;, replacement = &quot;&quot;, ., fixed = TRUE))</pre>

<pre >## [1] &quot;Barry Rowlingson&quot; &quot;Barry Rowlingson&quot;</pre>

</article></slide><slide class=""><hgroup><h2>小挑戰</h2></hgroup><article  id="section-3">

<ul>
<li>怎麼用上面的方式，找出名字中包含<code>Paul</code>的人？</li>
<li>尋找<code>x250</code>中<code>&lt;author&gt;</code>與<code>&lt;/author&gt;</code>中包含Paul的人</li>
</ul>

</article></slide><slide class=""><hgroup><h2>正則表示式：大絕招</h2></hgroup><article  id="section-4">

<p>正則表示式是一種描述文字模式的語言。 它不是單純依照應用歸納出來的工具，背後具有相當的數學基礎。 正則表示式的誕生，來自於美國數學家Stephen Cole Kleene在超過半個世紀之前的研究成果：Kleene (1956)。 目前各種程式語言中，幾乎都內建正則表示式，但是他們的語法主要分成兩個派系：</p>

<pre >一種語法出自於電機電子工程師學會(IEEE)制定的標準
一種語法，則來自於另一個程式語言：Perl</pre>

<p>正則表示是可以讓我們撰寫程式來自文字中比對、取代甚至是抽取各種資訊。以下我們將從簡單的應用開始介紹。</p>

</article></slide><slide class=""><hgroup><h2><code>grep</code></h2></hgroup><article  class="r-source-small" id="grep-1">

<pre class = 'prettyprint lang-r'>grep(&quot;&lt;author&gt;.*Paul.*&lt;/author&gt;&quot;, x, value = TRUE)</pre>

<pre >## [1] &quot;  &lt;author&gt;Paul Murrell&lt;/author&gt;&quot;</pre>

<pre class = 'prettyprint lang-r'>grep(&quot;&lt;author&gt;.*Paul.*&lt;/author&gt;&quot;, x250, value = TRUE)</pre>

<pre >## [1] &quot;  &lt;author&gt;Paul Murrell&lt;/author&gt;&quot;                                    
## [2] &quot;  &lt;author&gt;Paul Gilbert, Douglas Bates, and Brian D. Ripley&lt;/author&gt;&quot;
## [3] &quot;  &lt;author&gt;Paul Murrell&lt;/author&gt;&quot;                                    
## [4] &quot;  &lt;author&gt;Gustaf Rydevik and Paul Gilbert&lt;/author&gt;&quot;                 
## [5] &quot;  &lt;author&gt;Paul R. Stanley&lt;/author&gt;&quot;</pre>

<ul>
<li><code>pattern</code>參數中的<code>&quot;&lt;author&gt;.*Paul.*&lt;/author&gt;&quot;</code>

<ul>
<li><code>.</code>與<code>.*</code>是特殊字元</li>
<li><code>.</code>代表一個任意字元</li>
<li><code>*</code>代表前面的符號重複無限次</li>
<li><code>.*</code>代表任意長度的任意符號</li>
</ul></li>
</ul>

</article></slide><slide class=""><hgroup><h2>子模式(sub-pattern)，用<code>(</code>與<code>)</code>表示</h2></hgroup><article  id="sub-pattern">

<pre class = 'prettyprint lang-r'>m &lt;- regexec(&quot;&lt;author&gt;(.*)&lt;/author&gt;&quot;, x)
. &lt;- regmatches(x, m)
.[1:5]</pre>

<pre >## [[1]]
## character(0)
## 
## [[2]]
## character(0)
## 
## [[3]]
## [1] &quot;&lt;author&gt;Barry Rowlingson&lt;/author&gt;&quot; &quot;Barry Rowlingson&quot;                 
## 
## [[4]]
## character(0)
## 
## [[5]]
## character(0)</pre>

</article></slide><slide class=""><hgroup><h2>適當的利用<code>sapply</code>化簡程式碼</h2></hgroup><article  id="sapply">

<ul>
<li>在字串處理時，常常需要對每一個list的element作挑選或計算長度</li>
<li><code>sapply(., length)</code>可以得到每一個element的長度</li>
<li><code>sapply(., &quot;[&quot;, 2)</code>可以得到每一個element vector的第二個element</li>
</ul>

<pre class = 'prettyprint lang-r'>(. &lt;- .[sapply(., length) == 2])</pre>

<pre >## [[1]]
## [1] &quot;&lt;author&gt;Barry Rowlingson&lt;/author&gt;&quot; &quot;Barry Rowlingson&quot;                 
## 
## [[2]]
## [1] &quot;&lt;author&gt;Barry Rowlingson&lt;/author&gt;&quot; &quot;Barry Rowlingson&quot;                 
## 
## [[3]]
## [1] &quot;&lt;author&gt;Robert Gentleman&lt;/author&gt;&quot; &quot;Robert Gentleman&quot;                 
## 
## [[4]]
## [1] &quot;&lt;author&gt;Ross Ihaka&lt;/author&gt;&quot; &quot;Ross Ihaka&quot;                 
## 
## [[5]]
## [1] &quot;&lt;author&gt;Paul Murrell&lt;/author&gt;&quot; &quot;Paul Murrell&quot;</pre>

<pre class = 'prettyprint lang-r'>sapply(., &quot;[&quot;, 2)</pre>

<pre >## [1] &quot;Barry Rowlingson&quot; &quot;Barry Rowlingson&quot; &quot;Robert Gentleman&quot;
## [4] &quot;Ross Ihaka&quot;       &quot;Paul Murrell&quot;</pre>

<ul>
<li>不熟悉的同學，仍然可以寫迴圈慢慢作</li>
</ul>

</article></slide><slide class=""><hgroup><h2>參考閱讀</h2></hgroup><article  id="section-5">

<ul>
<li><a href='https://datascienceandr.org/articles/RegularExpression.html' title=''>正則表示式：文字處理的大絕招</a></li>
</ul>

</article></slide><slide class=""><hgroup><h2>練習</h2></hgroup><article  id="section-6">

<ul>
<li>用正則表示式，找出x250中包含<code>Ripley</code>的那行文字</li>
<li>尋找<code>x250</code>中<code>&lt;author&gt;</code>與<code>&lt;/author&gt;</code>中包含<code>Ripley</code>的人</li>
<li>找出所有出現過的作者，與他們的出現次數（還要用 and 做切割）</li>
</ul>

<aside class='note'><section><pre class = 'prettyprint lang-r'>grep(&quot;Ripley&quot;, x250, value = TRUE)
grep(&quot;&lt;author&gt;.*Ripley.*&lt;/author&gt;&quot;, x250, value = TRUE)
m &lt;- regexec(&quot;&lt;author&gt;(.*)&lt;/author&gt;&quot;, x250)
. &lt;- regmatches(x250, m)
. &lt;- .[sapply(., length) &gt;= 2]
. &lt;- sapply(., &quot;[&quot;, 2)
. &lt;- strsplit(., split = &quot;and&quot;)
. &lt;- unlist(.)
. &lt;- trimws(.)
sort(table(.))</pre></section></aside>

</article></slide><slide class=""><hgroup><h2>編碼問題</h2></hgroup><article  id="section-7">

<ul>
<li>電腦的資料，最終都是0和1</li>
<li>怎麼把一連串的0和1解讀成數字或文字？型態</li>
</ul>

<pre class = 'prettyprint lang-r'>(. &lt;- as.raw(17))</pre>

<pre >## [1] 11</pre>

<ul>
<li>這是 0 / 1 的十六進位表示法</li>
<li><code>11</code> 代表 <code>1 * 16 + 1</code></li>
</ul>

<pre class = 'prettyprint lang-r'>showBits &lt;- function(r) stats::symnum(as.logical(rawToBits(r)), symbols = c(&quot;0&quot;, &quot;1&quot;))
showBits(as.raw(17))</pre>

<pre >## [1] 1 0 0 0 1 0 0 0</pre>

</article></slide><slide class=""><hgroup><h2>編碼問題</h2></hgroup><article  id="section-8">

<ul>
<li>一個整數在R中有4個bytes(8個0/1)

<ul>
<li>一個bytes可以用兩個16進位表示，稱為<code>hex code</code></li>
</ul></li>
</ul>

<div id="htmlwidget-7d330cbeb02597d30064" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7d330cbeb02597d30064">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"255\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;00&quot;,&quot;01&quot;,&quot;02&quot;,&quot;03&quot;,&quot;04&quot;,&quot;05&quot;,&quot;06&quot;,&quot;07&quot;,&quot;18&quot;,&quot;19&quot;,&quot;1a&quot;,&quot;1b&quot;,&quot;1c&quot;,&quot;1d&quot;,&quot;1e&quot;,&quot;1f&quot;,&quot;20&quot;,&quot;21&quot;,&quot;22&quot;,&quot;23&quot;,&quot;24&quot;,&quot;25&quot;,&quot;26&quot;,&quot;27&quot;,&quot;38&quot;,&quot;39&quot;,&quot;3a&quot;,&quot;3b&quot;,&quot;3c&quot;,&quot;3d&quot;,&quot;3e&quot;,&quot;3f&quot;,&quot;40&quot;,&quot;41&quot;,&quot;42&quot;,&quot;43&quot;,&quot;44&quot;,&quot;45&quot;,&quot;46&quot;,&quot;47&quot;,&quot;58&quot;,&quot;59&quot;,&quot;5a&quot;,&quot;5b&quot;,&quot;5c&quot;,&quot;5d&quot;,&quot;5e&quot;,&quot;5f&quot;,&quot;60&quot;,&quot;61&quot;,&quot;62&quot;,&quot;63&quot;,&quot;64&quot;,&quot;65&quot;,&quot;66&quot;,&quot;67&quot;,&quot;78&quot;,&quot;79&quot;,&quot;7a&quot;,&quot;7b&quot;,&quot;7c&quot;,&quot;7d&quot;,&quot;7e&quot;,&quot;7f&quot;,&quot;80&quot;,&quot;81&quot;,&quot;82&quot;,&quot;83&quot;,&quot;84&quot;,&quot;85&quot;,&quot;86&quot;,&quot;87&quot;,&quot;98&quot;,&quot;99&quot;,&quot;9a&quot;,&quot;9b&quot;,&quot;9c&quot;,&quot;9d&quot;,&quot;9e&quot;,&quot;9f&quot;,&quot;a0&quot;,&quot;a1&quot;,&quot;a2&quot;,&quot;a3&quot;,&quot;a4&quot;,&quot;a5&quot;,&quot;a6&quot;,&quot;a7&quot;,&quot;b8&quot;,&quot;b9&quot;,&quot;ba&quot;,&quot;bb&quot;,&quot;bc&quot;,&quot;bd&quot;,&quot;be&quot;,&quot;bf&quot;,&quot;c0&quot;,&quot;c1&quot;,&quot;c2&quot;,&quot;c3&quot;,&quot;c4&quot;,&quot;c5&quot;,&quot;c6&quot;,&quot;c7&quot;,&quot;d8&quot;,&quot;d9&quot;,&quot;da&quot;,&quot;db&quot;,&quot;dc&quot;,&quot;dd&quot;,&quot;de&quot;,&quot;df&quot;,&quot;e0&quot;,&quot;e1&quot;,&quot;e2&quot;,&quot;e3&quot;,&quot;e4&quot;,&quot;e5&quot;,&quot;e6&quot;,&quot;e7&quot;,&quot;f8&quot;,&quot;f9&quot;,&quot;fa&quot;,&quot;fb&quot;,&quot;fc&quot;,&quot;fd&quot;,&quot;fe&quot;,&quot;ff&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;00000000&quot;,&quot;00000001&quot;,&quot;00000010&quot;,&quot;00000011&quot;,&quot;00000100&quot;,&quot;00000101&quot;,&quot;00000110&quot;,&quot;00000111&quot;,&quot;00011000&quot;,&quot;00011001&quot;,&quot;00011010&quot;,&quot;00011011&quot;,&quot;00011100&quot;,&quot;00011101&quot;,&quot;00011110&quot;,&quot;00011111&quot;,&quot;00100000&quot;,&quot;00100001&quot;,&quot;00100010&quot;,&quot;00100011&quot;,&quot;00100100&quot;,&quot;00100101&quot;,&quot;00100110&quot;,&quot;00100111&quot;,&quot;00111000&quot;,&quot;00111001&quot;,&quot;00111010&quot;,&quot;00111011&quot;,&quot;00111100&quot;,&quot;00111101&quot;,&quot;00111110&quot;,&quot;00111111&quot;,&quot;01000000&quot;,&quot;01000001&quot;,&quot;01000010&quot;,&quot;01000011&quot;,&quot;01000100&quot;,&quot;01000101&quot;,&quot;01000110&quot;,&quot;01000111&quot;,&quot;01011000&quot;,&quot;01011001&quot;,&quot;01011010&quot;,&quot;01011011&quot;,&quot;01011100&quot;,&quot;01011101&quot;,&quot;01011110&quot;,&quot;01011111&quot;,&quot;01100000&quot;,&quot;01100001&quot;,&quot;01100010&quot;,&quot;01100011&quot;,&quot;01100100&quot;,&quot;01100101&quot;,&quot;01100110&quot;,&quot;01100111&quot;,&quot;01111000&quot;,&quot;01111001&quot;,&quot;01111010&quot;,&quot;01111011&quot;,&quot;01111100&quot;,&quot;01111101&quot;,&quot;01111110&quot;,&quot;01111111&quot;,&quot;10000000&quot;,&quot;10000001&quot;,&quot;10000010&quot;,&quot;10000011&quot;,&quot;10000100&quot;,&quot;10000101&quot;,&quot;10000110&quot;,&quot;10000111&quot;,&quot;10011000&quot;,&quot;10011001&quot;,&quot;10011010&quot;,&quot;10011011&quot;,&quot;10011100&quot;,&quot;10011101&quot;,&quot;10011110&quot;,&quot;10011111&quot;,&quot;10100000&quot;,&quot;10100001&quot;,&quot;10100010&quot;,&quot;10100011&quot;,&quot;10100100&quot;,&quot;10100101&quot;,&quot;10100110&quot;,&quot;10100111&quot;,&quot;10111000&quot;,&quot;10111001&quot;,&quot;10111010&quot;,&quot;10111011&quot;,&quot;10111100&quot;,&quot;10111101&quot;,&quot;10111110&quot;,&quot;10111111&quot;,&quot;11000000&quot;,&quot;11000001&quot;,&quot;11000010&quot;,&quot;11000011&quot;,&quot;11000100&quot;,&quot;11000101&quot;,&quot;11000110&quot;,&quot;11000111&quot;,&quot;11011000&quot;,&quot;11011001&quot;,&quot;11011010&quot;,&quot;11011011&quot;,&quot;11011100&quot;,&quot;11011101&quot;,&quot;11011110&quot;,&quot;11011111&quot;,&quot;11100000&quot;,&quot;11100001&quot;,&quot;11100010&quot;,&quot;11100011&quot;,&quot;11100100&quot;,&quot;11100101&quot;,&quot;11100110&quot;,&quot;11100111&quot;,&quot;11111000&quot;,&quot;11111001&quot;,&quot;11111010&quot;,&quot;11111011&quot;,&quot;11111100&quot;,&quot;11111101&quot;,&quot;11111110&quot;,&quot;11111111&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","data":[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],["00","01","02","03","04","05","06","07","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","f8","f9","fa","fb","fc","fd","fe","ff","00","01","02","03","04","05","06","07","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","f8","f9","fa","fb","fc","fd","fe","ff"],["00000000","10000000","01000000","11000000","00100000","10100000","01100000","11100000","00011000","10011000","01011000","11011000","00111000","10111000","01111000","11111000","00000100","10000100","01000100","11000100","00100100","10100100","01100100","11100100","00011100","10011100","01011100","11011100","00111100","10111100","01111100","11111100","00000010","10000010","01000010","11000010","00100010","10100010","01100010","11100010","00011010","10011010","01011010","11011010","00111010","10111010","01111010","11111010","00000110","10000110","01000110","11000110","00100110","10100110","01100110","11100110","00011110","10011110","01011110","11011110","00111110","10111110","01111110","11111110","00000001","10000001","01000001","11000001","00100001","10100001","01100001","11100001","00011001","10011001","01011001","11011001","00111001","10111001","01111001","11111001","00000101","10000101","01000101","11000101","00100101","10100101","01100101","11100101","00011101","10011101","01011101","11011101","00111101","10111101","01111101","11111101","00000011","10000011","01000011","11000011","00100011","10100011","01100011","11100011","00011011","10011011","01011011","11011011","00111011","10111011","01111011","11111011","00000111","10000111","01000111","11000111","00100111","10100111","01100111","11100111","00011111","10011111","01011111","11011111","00111111","10111111","01111111","11111111","00000000","10000000","01000000","11000000","00100000","10100000","01100000","11100000","00011000","10011000","01011000","11011000","00111000","10111000","01111000","11111000","00000100","10000100","01000100","11000100","00100100","10100100","01100100","11100100","00011100","10011100","01011100","11011100","00111100","10111100","01111100","11111100","00000010","10000010","01000010","11000010","00100010","10100010","01100010","11100010","00011010","10011010","01011010","11011010","00111010","10111010","01111010","11111010","00000110","10000110","01000110","11000110","00100110","10100110","01100110","11100110","00011110","10011110","01011110","11011110","00111110","10111110","01111110","11111110","00000001","10000001","01000001","11000001","00100001","10100001","01100001","11100001","00011001","10011001","01011001","11011001","00111001","10111001","01111001","11111001","00000101","10000101","01000101","11000101","00100101","10100101","01100101","11100101","00011101","10011101","01011101","11011101","00111101","10111101","01111101","11111101","00000011","10000011","01000011","11000011","00100011","10100011","01100011","11100011","00011011","10011011","01011011","11011011","00111011","10111011","01111011","11111011","00000111","10000111","01000111","11000111","00100111","10100111","01100111","11100111","00011111","10011111","01011111","11011111","00111111","10111111","01111111","11111111"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>int<\/th>\n      <th>hex<\/th>\n      <th>bits<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"scrollX":"400px","columnDefs":[{"className":"dt-right","targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[8,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

</article></slide><slide class=""><hgroup><h2><code>rawVector</code></h2></hgroup><article  id="rawvector">

<ul>
<li>R的<code>rawVector</code>會用hex code來表示一連串電腦真正看到的值</li>
<li><code>charToRaw</code>會把文字轉成代表該文字的真正的<code>rawVector</code></li>
</ul>

<pre class = 'prettyprint lang-r'>charToRaw(&quot;a&quot;)</pre>

<pre >## [1] 61</pre>

<pre class = 'prettyprint lang-r'>showBits(charToRaw(&quot;a&quot;))</pre>

<pre >## [1] 1 0 0 0 0 1 1 0</pre>

</article></slide><slide class=""><hgroup><h2><code>rawVector</code></h2></hgroup><article  id="rawvector-1">

<ul>
<li>R的<code>rawVector</code>會用hex code來表示一連串電腦真正看到的值</li>
<li><code>charToRaw</code>會把文字轉成代表該文字的真正的<code>rawVector</code></li>
</ul>

<pre class = 'prettyprint lang-r'>charToRaw(&quot;中&quot;) # 不同作業系統看到的結果不同</pre>

<pre >## [1] e4 b8 ad</pre>

<pre class = 'prettyprint lang-r'>showBits(charToRaw(&quot;中&quot;))</pre>

<pre >##  [1] 0 0 1 0 0 1 1 1 0 0 0 1 1 1 0 1 1 0 1 1 0 1 0 1</pre>

</article></slide><slide class=""><hgroup><h2>把0/1變成文字的規則: ASCII(American Standard Code for Information Interchange)</h2></hgroup><article  id="asciiamerican-standard-code-for-information-interchange">

<ul>
<li><p>這種「把0/1轉換為文字的規則」又稱為「編碼」</p></li>
<li><code>30</code> –&gt; <code>&quot;0&quot;</code></li>
<li><code>41</code> –&gt; <code>&quot;A&quot;</code></li>
<li><p><code>61</code> –&gt; <code>&quot;a&quot;</code></p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>把0/1變成中文的規則： BIG5 / UTF-8</h2></hgroup><article  id="big5-utf-8">

<h3><code>BIG5</code></h3>

<ul>
<li><code>0 0 1 0 0 1 0 1 0 0 1 0 0 1 0 1</code> –&gt; <code>a4 a4</code> –&gt; <code>&quot;中&quot;</code></li>
<li><code>0 0 1 0 0 1 0 1 1 0 1 0 0 1 1 1</code> –&gt; <code>a4 e5</code> –&gt; <code>&quot;文&quot;</code></li>
</ul>

<h3><code>UTF-8</code></h3>

<ul>
<li><code>0 0 1 0 0 1 1 1 0 0 0 1 1 1 0 1 1 0 1 1 0 1 0 1</code> –&gt; <code>e4 b8 ad</code> –&gt; <code>&quot;中&quot;</code></li>
<li><code>0 1 1 0 0 1 1 1 0 1 1 0 1 0 0 1 1 1 1 0 0 0 0 1</code> –&gt; <code>e6 96 87</code> –&gt; <code>&quot;文&quot;</code></li>
</ul>

</article></slide><slide class=""><hgroup><h2>錯誤的中文編碼</h2></hgroup><article  id="section-9">

<ul>
<li>把BIG5當成UTF-8</li>
</ul>

<pre >[1] &quot;\xa4\xa4\xa4\xe5&quot;</pre>

<ul>
<li>把UTF-8當成BIG5 (on windows)</li>
</ul>

<p><img src='img/utf-8-on-windows.png' style='max-width: 100%; max-height: 100%; '></img></p>

</article></slide><slide class=""><hgroup><h2>R 處理編碼的機制</h2></hgroup><article  id="r-">

<ul>
<li>原生的R，處理的不太好…</li>
</ul>

<pre class = 'prettyprint lang-r'>Encoding(x) &lt;- &quot;UTF-8&quot;
x</pre>

<ul>
<li>套件<code>stringi</code>補上滿多相關功能</li>
<li>細節在作業中</li>
</ul></article></slide>


  <slide class="backdrop"></slide>

</slides>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
  })();
</script>

</body>
</html>
